<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>RedisDeck - Dashboard & Management</title>
        <script>
            (function () {
                const theme =
                    localStorage.getItem('redisdeck-theme') || 'light';
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark-theme');
                }
            })();
        </script>
        <link rel="stylesheet" href="css/styles.css" />
        <script
            type="module"
            src="/node_modules/@alenaksu/json-viewer/dist/json-viewer.bundle.js"
        ></script>
    </head>
    <body>
        <div class="container">
            <header>
                <div class="logo-container">
                    <svg
                        class="logo"
                        viewBox="0 0 465 100"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <defs>
                            <style>
                                .primary-red {
                                    fill: #dc382d;
                                }
                                .dark-accent {
                                    fill: #1a1a1a;
                                }
                                .light-red {
                                    fill: #e85d52;
                                }
                            </style>
                        </defs>
                        <g transform="translate(215, 50)">
                            <g transform="translate(-215, -40)">
                                <rect
                                    x="20"
                                    y="20"
                                    width="100"
                                    height="70"
                                    rx="4"
                                    class="dark-accent"
                                    opacity="0.3"
                                />
                                <rect
                                    x="10"
                                    y="10"
                                    width="100"
                                    height="70"
                                    rx="4"
                                    class="primary-red"
                                    opacity="0.7"
                                />
                                <g>
                                    <rect
                                        x="0"
                                        y="0"
                                        width="100"
                                        height="70"
                                        rx="4"
                                        class="primary-red"
                                    />
                                    <line
                                        x1="35"
                                        y1="8"
                                        x2="35"
                                        y2="62"
                                        stroke="#FAFAFA"
                                        stroke-width="2"
                                    />
                                    <line
                                        x1="65"
                                        y1="8"
                                        x2="65"
                                        y2="62"
                                        stroke="#FAFAFA"
                                        stroke-width="2"
                                    />
                                    <line
                                        x1="8"
                                        y1="35"
                                        x2="92"
                                        y2="35"
                                        stroke="#FAFAFA"
                                        stroke-width="2"
                                    />
                                    <circle
                                        cx="20"
                                        cy="20"
                                        r="4"
                                        fill="#FAFAFA"
                                    />
                                    <circle
                                        cx="50"
                                        cy="20"
                                        r="4"
                                        fill="#FAFAFA"
                                    />
                                    <circle
                                        cx="80"
                                        cy="20"
                                        r="4"
                                        fill="#FAFAFA"
                                    />
                                    <circle
                                        cx="20"
                                        cy="50"
                                        r="4"
                                        fill="#FAFAFA"
                                    />
                                    <circle
                                        cx="50"
                                        cy="50"
                                        r="4"
                                        fill="#FAFAFA"
                                    />
                                    <circle
                                        cx="80"
                                        cy="50"
                                        r="4"
                                        fill="#FAFAFA"
                                    />
                                </g>
                            </g>
                            <text
                                x="-90"
                                y="11"
                                dominant-baseline="middle"
                                font-family="'Inter', 'Helvetica Neue', Arial, sans-serif"
                                font-size="68"
                                font-weight="700"
                                class="primary-red"
                                letter-spacing="-2"
                            >
                                Redis
                            </text>
                            <text
                                x="85"
                                y="11"
                                dominant-baseline="middle"
                                font-family="'Inter', 'Helvetica Neue', Arial, sans-serif"
                                font-size="68"
                                font-weight="700"
                                class="dark-accent"
                                letter-spacing="-2"
                            >
                                Deck
                            </text>
                        </g>
                    </svg>
                </div>
                <div class="connection-info" style="display: none">
                    <div class="environment-selector">
                        <label for="environment-select">Environment:</label>
                        <select id="environment-select">
                            <option value="staging">Staging</option>
                            <option value="production">Production</option>
                        </select>
                    </div>
                    <span id="total-keys-count" class="total-keys"
                        >Total Keys: Loading...</span
                    >
                </div>
                <div class="redis-info-button">
                    <a
                        href="/statistics.html"
                        class="secondary-btn"
                        title="Statistics"
                        >üìä</a
                    >
                    <a
                        href="/settings.html"
                        class="secondary-btn"
                        title="Settings"
                        >‚öôÔ∏è</a
                    >
                </div>
            </header>

            <main>
                <section
                    class="empty-state"
                    id="empty-state"
                    style="display: none"
                ></section>

                <section
                    class="search-section"
                    id="main-content"
                    data-priority="0"
                    style="display: none"
                >
                    <h2>Search Keys</h2>
                    <div class="search-bar">
                        <input
                            type="text"
                            id="search-pattern"
                            placeholder="Key pattern (e.g., user:*, *name*)"
                        />
                        <button id="search-btn">Search</button>
                        <button id="show-all-btn" class="secondary-btn">
                            Show All Keys
                        </button>
                    </div>
                    <div class="results-area">
                        <div class="keys-list">
                            <h3>Keys <span id="keys-count">(0)</span></h3>
                            <ul id="keys-results"></ul>
                            <div class="pagination-controls">
                                <div class="pagination-status">
                                    <span id="pagination-info"
                                        >Showing 0 keys</span
                                    >
                                </div>
                                <button
                                    id="load-more-btn"
                                    class="secondary-btn"
                                    disabled
                                >
                                    Load More
                                </button>
                            </div>
                        </div>
                        <div class="key-details">
                            <h3>Key Details</h3>
                            <div id="key-info">
                                <p>Select a key to view details</p>
                            </div>
                            <div id="key-actions" class="hidden">
                                <div class="ttl-info">
                                    <span
                                        >TTL:
                                        <span id="key-ttl">N/A</span></span
                                    >
                                    <button
                                        id="set-ttl-btn"
                                        class="secondary-btn"
                                    >
                                        Set TTL
                                    </button>
                                </div>
                                <div class="action-buttons">
                                    <button
                                        id="delete-key-btn"
                                        class="danger-btn"
                                    >
                                        Delete
                                    </button>
                                    <button
                                        id="rename-key-btn"
                                        class="secondary-btn"
                                    >
                                        Rename
                                    </button>
                                    <button
                                        id="copy-key-btn"
                                        class="secondary-btn"
                                    >
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>

            <!-- Modals -->
            <div id="set-ttl-modal" class="modal hidden">
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    <h3>Set Time To Live</h3>
                    <p>Current key: <span id="ttl-key-name"></span></p>
                    <div class="form-group">
                        <label for="ttl-seconds">TTL (seconds):</label>
                        <input
                            type="number"
                            id="ttl-seconds"
                            placeholder="Enter seconds"
                        />
                        <p class="help-text">Use -1 to remove expiry</p>
                    </div>
                    <div class="modal-buttons">
                        <button id="apply-ttl-btn">Apply</button>
                        <button id="cancel-ttl-btn" class="secondary-btn">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>

            <div id="rename-key-modal" class="modal hidden">
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    <h3>Rename Key</h3>
                    <p>Current key: <span id="rename-current-key"></span></p>
                    <div class="form-group">
                        <label for="rename-new-key">New key name:</label>
                        <input
                            type="text"
                            id="rename-new-key"
                            placeholder="Enter new key name"
                        />
                    </div>
                    <div class="modal-buttons">
                        <button id="apply-rename-btn">Apply</button>
                        <button id="cancel-rename-btn" class="secondary-btn">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>

            <div id="copy-key-modal" class="modal hidden">
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    <h3>Copy Key</h3>
                    <p>Source key: <span id="copy-source-key"></span></p>
                    <div class="form-group">
                        <label for="copy-target-key">Target key name:</label>
                        <input
                            type="text"
                            id="copy-target-key"
                            placeholder="Enter target key name"
                        />
                    </div>
                    <div class="form-group">
                        <label for="copy-target-env">Target environment:</label>
                        <select id="copy-target-env">
                            <option value="staging">Staging</option>
                            <option value="production">Production</option>
                        </select>
                    </div>
                    <div class="modal-buttons">
                        <button id="apply-copy-btn">Copy</button>
                        <button id="cancel-copy-btn" class="secondary-btn">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>

            <div id="view-value-modal" class="modal hidden">
                <div class="modal-content wide-modal">
                    <span class="close-modal">&times;</span>
                    <h3>Value Details</h3>
                    <div class="value-view-tabs">
                        <button class="value-tab-btn" data-tab="formatted">
                            Formatted
                        </button>
                        <button class="value-tab-btn active" data-tab="tree">
                            Tree View
                        </button>
                    </div>
                    <div class="value-viewer-container">
                        <pre
                            id="value-viewer-raw"
                            class="value-viewer-raw value-tab-content"
                            data-content="formatted"
                        ></pre>
                        <json-viewer
                            id="value-viewer-json"
                            class="value-tab-content active"
                            data-content="tree"
                        ></json-viewer>
                    </div>
                </div>
            </div>

            <div id="toast" class="toast"></div>
        </div>

        <script type="module" src="js/utils/theme.js"></script>
        <script type="module" src="js/app.js"></script>
    </body>
</html>
